<?xml version="1.0" encoding="UTF-8"?>
<Symbol IsArchivable="true" IsPlaceable="false" MainGUID="B62F1C43-86A4-4B65-807A-8621F19C81DC" MigrationValue="Normal" Owner="0" Signature="1196644685" Version="36">
<SubKind SectVersion="1" SectionFlags="0" SubIdent="0" length_in_bytes="256" platform="Win">
	<![CDATA[
	5757010000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	]]>
</SubKind>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_3D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
!call "Шаблон профиля" parameters all
!hotspot 0,0,0
!if not(show) then end
!success = LIBRARYGLOBAL ("Libraryflobals-km", "mat_by_type_code", mat_by_type_code)
!is_mat_set = 0
!if (show_spec or type_spec = "Не специфицировать") and not(is_mat_set) and mat_by_type_code<>1 then
!	ignore_mat = 0
!	success = LIBRARYGLOBAL ("Libraryflobals-km", "ignore_mat", ignore_mat)
!	col_mat = ignore_mat
!	is_mat_set = 1
!endif
!if mat_by_type_code<>1 and not(is_mat_set) then
!	if mat_by_type_code=2 then 
!		name_mat_arr = "cov_mat_arr"
!		inx_mat = cov_mat
!	endif
!	if mat_by_type_code=3 then
!		name_mat_arr = "fire_keep_mat_arr"
!		inx_mat = fire_keep_mat
!	endif
!	if mat_by_type_code=4 then
!		name_mat_arr = "konstr_mat_arr"
!		inx_mat = type_mat
!	endif
!	if mat_by_type_code=5 then
!		name_mat_arr = "fire_mat_arr"
!		inx_mat = fire_mat
!	endif
!	if mat_by_type_code=6 then
!		name_mat_arr = "stal_mat_arr"
!		inx_mat = stal_mat
!	endif
!	if mat_by_type_code=7 then
!		name_mat_arr = "type_spec_mat_arr"
!		inx_mat = type_spec_mat
!	endif
!	if mat_by_type_code=8 then
!		name_mat_arr = "connect_mat_arr"
!		inx_mat = upr_mat
!	endif
!	if inx_mat=99 or inx_mat<1 then 
!		col_mat = 0
!	else
!		dim cov_mat_arr[]
!		success = LIBRARYGLOBAL ("Libraryflobals-km", name_mat_arr, cov_mat_arr)
!		col_mat = cov_mat_arr[inx_mat]
!	endif
!	is_mat_set = 1
!endif
!pen gs_cont_pen
!material col_mat
!if gs_shadow=0 then
!	shadow off
!else
!	shadow on
!endif
]]>
</Script_3D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_2D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
]]>
</Script_2D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_1D SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
dim tdet_lvl[]
dim idet_lvl[] : i=0
i=i+1 : idet_lvl[i]=0 : tdet_lvl[i] = "По ПМВ"
i=i+1 : idet_lvl[i]=1 : tdet_lvl[i] = "Детальный"
i=i+1 : idet_lvl[i]=2 : tdet_lvl[i] = "Простой"
i=i+1 : idet_lvl[i]=3 : tdet_lvl[i] = "Только 2д"
i=i+1 : idet_lvl[i]=4 : tdet_lvl[i] = "Только 3д"

dim ttype_axis[]
dim itype_axis[] : i=0
i=i+1 : itype_axis[i]=0 : ttype_axis[i] = "По ПМВ"
i=i+1 : itype_axis[i]=1 : ttype_axis[i] = "Без оси"
i=i+1 : itype_axis[i]=2 : ttype_axis[i] = "Ось+тело"
i=i+1 : itype_axis[i]=3 : ttype_axis[i] = "Только ось"
]]>
</Script_1D>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_VL SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
dim arr_t[]
n = REQUEST ("Name_of_main", "", main_name)
is_new = (STRSTR(main_name,"универс")<>0)
dim param_name_out_t[] : i=1
param_name_out_t[1] = "!!Профиль "+name_prof+"!!"
i=i+1 : param_name_out_t[i] = "naen - наименование"
i=i+1 : param_name_out_t[i] = "obozn - обозначение"
i=i+1 : param_name_out_t[i] = "tip_profile - сечение"
i=i+1 : param_name_out_t[i] = "mater - марка стали"
parameters param_name_out = param_name_out_t

dim param_temp_out_t[] : i=0
i=i+1 : param_temp_out_t[i] = "%subpos%"
i=i+1 : param_temp_out_t[i] = "%naen%"
i=i+1 : param_temp_out_t[i] = "%tip_profile% по %obozn% %mater%"
parameters param_temp_out = param_temp_out_t

values{2} "det_lvl" idet_lvl, tdet_lvl
values{2} "type_axis" itype_axis, ttype_axis
values "gs_detlevel_3D" `Простой`,`Детальный`,`Откл.`
values "gs_resol" range [10,)
if gs_detlevel_3D=`Простой` then lock "gs_resol"

values "proc_zap" range[0.01,0.15]
! --- Rotation Angle -----------------------------------------------------------
if not(is_new) then 
	values "ang" range[-90,90]
	if temp_ang >= 270 and temp_ang <= 360 then parameters temp_ang = 0		!! Bottom
	if temp_ang < 270 and temp_ang >= 180 then parameters temp_ang = 180
	if GLOB_MODPAR_NAME = "temp_ang" then
		parameters ang = temp_ang - 90
	else
		parameters temp_ang = ang + 90
	endif
	values "gs_cutang1_bot" range(-90,90)
	values "gs_cutang2_bot" range(-90,90)
	values "gs_cutang3_up" range(-90,90)
	values "gs_cutang4_up" range(-90,90)
	if temp_cutang1_bot > 120 and temp_cutang1_bot < (360-120)/2+120 then parameters temp_cutang1_bot = 120
	if temp_cutang1_bot < 360 and temp_cutang1_bot >= (360-120)/2+120 then parameters temp_cutang1_bot = 0
	if temp_cutang2_bot > 120 and temp_cutang2_bot < (360-120)/2+120 then parameters temp_cutang2_bot = 120
	if temp_cutang2_bot < 360 and temp_cutang2_bot >= (360-120)/2+120 then parameters temp_cutang2_bot = 0
	if temp_cutang3_up > 120 and temp_cutang3_up < (360-120)/2+120 then parameters temp_cutang3_up = 120
	if temp_cutang3_up < 360 and temp_cutang3_up >= (360-120)/2+120 then parameters temp_cutang3_up = 0
	!if temp_cutang4_up > 120 and temp_cutang4_up < (360-120)/2+120 then parameters temp_cutang4_up = 120
	!if temp_cutang4_up < 360 and temp_cutang4_up >= (360-120)/2+120 then parameters temp_cutang4_up = 0
	if GLOB_MODPAR_NAME = "temp_cutang1_bot" then
		parameters gs_cutang1_bot = temp_cutang1_bot - 60
	else
		parameters temp_cutang1_bot = gs_cutang1_bot + 60
	endif
	if GLOB_MODPAR_NAME = "temp_cutang2_bot" then
		parameters gs_cutang2_bot = temp_cutang2_bot - 60
	else
		parameters temp_cutang2_bot = gs_cutang2_bot + 60
	endif
	if GLOB_MODPAR_NAME = "temp_cutang3_up" then
		parameters gs_cutang3_up = temp_cutang3_up - 60
	else
		parameters temp_cutang3_up = gs_cutang3_up + 60
	endif
	!if GLOB_MODPAR_NAME = "temp_cutang4_up" then
	!	parameters gs_cutang4_up = temp_cutang4_up - 60
	!else
	!	parameters temp_cutang4_up = gs_cutang4_up + 60
	!endif
endif

dim var_sort[]
var_sort[1] = "Круглая труба"
var_sort[2] = "Квадратная труба"
var_sort[3] = "Швеллер"
var_sort[4] = "Двутавр"
var_sort[5] = "Уголок"
var_sort[6] = "Лист"
var_sort[7] = "Ручной"
var_sort[8] = "Уголок гнутый"
var_sort[9] = "Швеллер гнутый"
values "name_prof" var_sort 

!!-------------- Антикоррозийка ------------------------
dim cov_type_arr[]
success = LIBRARYGLOBAL ("Libraryflobals-km", "cov_type_arr", cov_type_arr)
values "mat_pokr" cov_type_arr!"Нет","тип 1","тип 2","тип 3","тип 4"
var = mat_pokr : arr_t = cov_type_arr : gosub "get_inx"
parameters cov_mat = inx

uch_pokr = 0
if mat_pokr <> "Нет" then uch_pokr = 1
if mat_pokr = "Нет" then uch_pokr = 0
parameters uch_pokr = uch_pokr
!!------------------------------------------------------

!!-------------- Тип конструкции ------------------------
dim tip_konstr_m[]
success = LIBRARYGLOBAL ("Libraryflobals-km", "konstr_type_arr", tip_konstr_m)
values "tip_konstr" tip_konstr_m, CUSTOM
var = tip_konstr : arr_t = tip_konstr_m : gosub "get_inx"
parameters type_mat = inx : n_konstr = inx
!!------------------------------------------------------

!!-------------------- Марка и ГОСТ на сталь --------------
dim marka_stal[] : marka_stal[1] = ""
dim stal_m[] : stal_m[1] = ""
success = LIBRARYGLOBAL ("Libraryflobals-km", "stal_type_arr", stal_m)
success = LIBRARYGLOBAL ("Libraryflobals-km", "stal_gost_arr", marka_stal)
values "mater" stal_m
var = mater : arr_t = stal_m : gosub "get_inx"
parameters stal_mat = inx : n_stal = inx
!!---------------------------------------------------------

!!----------------- Заглушки на торцы ---------------------
if name_prof <> var_sort[2] and is_new then hideparameter "sp1_Z"
values "z_mater" stal_m
var = z_mater : arr_t = stal_m : gosub "get_inx" : z_n_stal = inx
PARAMETERS z_stal_gost = marka_stal[z_n_stal]
PARAMETERS z_obozn = "ГОСТ 19903-74"
if not(is_z_left) then hideparameter "out_left", "z_th_left", "z_a_left", "z_b_left"
if not(is_z_right) then hideparameter "out_right", "z_th_right", "z_a_right", "z_b_right"
!!----------------------------------------------------------
if upr then
	PARAMETERS upr_mat=1
else
	PARAMETERS upr_mat=2
endif

dim tip_p_m[]
tip_p_m[1] = " "
dim massiv[][]
dim vekt[]
n_sort = 1

if name_prof <> "Ручной" then
	var1 = " ": var2 = " ": var3 = " ": var4 = " ": var5 = " "
	ch1 = open("text", "Сортаменты.txt", "separator='\t', mode=ro, LIBRARY")
	i = 2: j = 1
	1:
	n = input (ch1, i, 1, var1, var2, var3, var4, var5)
	if n <> -1 then
		if var5 = name_prof then
			massiv[j][1] = var1 + " "
			massiv[j][2] = var2 + " "
			massiv[j][3] = var3 + ".txt"
			massiv[j][4] = var4
			massiv[j][5] = var5
			j = j + 1
		endif
		i = i + 1
		goto 1
	else
		goto "close"
	endif
	"close":
	close ch1
	n = 8
	for i = 1 to VARDIM1(massiv)
		tip_p_m[i] = massiv[i][1]
	next i
	
	values "tip_p" tip_p_m
	
	for i = 1 to VARDIM1(massiv)
		if tip_p = massiv[i][1] then n_sort = i
	next i
	if n_sort <= VARDIM1(massiv) then
		PARAMETERS f_name = massiv[n_sort][3]
		PARAMETERS sor = massiv[n_sort][4]
	endif
	
	v1 = ""
	szelv = open("text", f_name, "separator='\t', mode=ro, LIBRARY")
	for i = 2 to sor
		mm = input(szelv, i, 2, v1)
		vekt[i-1] = v1
	next i
	close szelv
	values "Profile" vekt
endif

if name_prof <> "Лист" and name_prof <> "Ручной" then
	for i = 1 to VARDIM1(vekt)
		if Profile = vekt[i] then
			n_stroki = i + 1
		endif
	next i
	PARAMETERS n_stroki = n_stroki
	PARAMETERS lastProfile = Profile  
	szelv=open("text", f_name, "separator='\t', mode=ro, LIBRARY")
		n=input(szelv, n_stroki, 3, ves_p, Ase, ds, ws, wt, ft, rr, tr, dbf, ax_y)
	close szelv
	parameters ds = ds, ws = ws, wt = wt, ft = ft, rr = rr, tr = tr, dbf = dbf, ves_p = ves_p, Ase = Ase, ax_y = ax_y
	parameters B = ws/1000
	parameters ZZYZX = ds/1000

	if not(is_new) then
		if gs_cutmode_bot = `Вдоль вертикальной оси` or gs_cutmode_bot = `Перпендикулярно оси` then 
			b1 = ws / 1000
			add_b1 = 0
			if ang<>0 and gs_rot_axis=`Вдоль сечения` and gs_cutmode_bot <> `Перпендикулярно оси` then add_b1 = abs((0.5*ds*tan(ang))/1000)
		endif
		if gs_cutmode_bot = `Вдоль горизонтальной оси` then b1 = ds / 1000
		if add_b1>0 then b1 = b1 + abs((0.5*b1)*tan(ang))
		dop_podrez_1_1 = abs(0.5*tan(gs_cutang1_bot)*b1)*(gs_cutang1_bot<0)
		dop_podrez_1_2 = abs(0.5*tan(gs_cutang2_bot)*b1)*(gs_cutang2_bot<0)
		dop_podrez_1 = max(dop_podrez_1_1,dop_podrez_1_2)+add_b1
		
		if gs_cutmode_up = `Вдоль вертикальной оси` or gs_cutmode_bot = `Перпендикулярно оси` then 
			b2 = ws / 1000
			add_b2 = 0
			if ang<>0 and gs_rot_axis=`Вдоль сечения` and gs_cutmode_bot <> `Перпендикулярно оси` then add_b2 = abs((0.5*ds*tan(ang))/1000)
		endif
		if gs_cutmode_up = `Вдоль горизонтальной оси` then b2 = ds / 1000
		if add_b2>0 then b2 = b2 + abs((0.5*b2)*tan(ang))
		dop_podrez_2_1 = abs(0.5*tan(gs_cutang3_up)*b2) * (gs_cutang3_up<0)
		dop_podrez_2_2 = abs(0.5*tan(gs_cutang4_up)*b2) * (gs_cutang4_up<0)
		dop_podrez_2 = max(dop_podrez_2_1,dop_podrez_2_2)+add_b2
	endif

	naen_t = Profile + " L=" + str("%.0mm", dlin_prof) + "мм."
	if mun = 0 then
		vt = dlin_prof * ves_p + dlin_prof * ves_p * proc_zap
		if round_int(vt*5)/5 < vt then vt = vt + 0.1
		PARAMETERS ves = round_int(vt*5)/5
		PARAMETERS naen = pref_naen + naen_t
		if n_sort <= VARDIM1(massiv) then PARAMETERS obozn = massiv[n_sort][2]
		if n_stal <= VARDIM1(marka_stal) then
			PARAMETERS stal_marka = stal_m[n_stal]
			PARAMETERS stal_gost = marka_stal[n_stal]
		endif
	endif
endif

if mun = 0 then
	if n_sort <= VARDIM1(massiv) then PARAMETERS obozn = massiv[n_sort][2]
	if n_stal <= VARDIM1(marka_stal) then
		PARAMETERS stal_marka = stal_m[n_stal]
		PARAMETERS stal_gost = marka_stal[n_stal]
	endif
	IF strstr(Profile,"L")>0 then 
		PARAMETERS tip_profile = strsub(Profile,2,strlen(Profile))
	else
		PARAMETERS tip_profile = Profile
	endif
endif

if name_prof <> var_sort[6] and not(is_new) then
	raw_l = dop_podrez_1 + dop_podrez_2 + A
	traw_l = round_int(raw_l*200)/200
	if raw_l-traw_l>0.0001 then 
		raw_l = traw_l + 0.005
	else
		raw_l = traw_l
	endif
	PARAMETERS dlin_prof = raw_l
endif

!!--------------- Периметры и обогреваемый периметр для разных типов ---------
values "n_storon" 1,2,3,4
!"Круглая труба"
if name_prof = var_sort[1] then
	parameters n_storon = 4 	
	p = 3.146*ds/1000
	pf = p
	s = p*dlin_prof
endif

!"Квадратная труба"
if name_prof = var_sort[2] then
	p = (ws+ds)*2/1000
	s = p*dlin_prof
	if n_storon = 1 then pf = ds/1000
	if n_storon = 2 then pf = (ws+ds)/1000
	if n_storon = 3 then pf = (ws+ds*2)/1000
	if n_storon = 4 then pf = p

	if not(is_new) then
		if is_z_left then
			z_a_left = ws - 2*wt*(out_left=0) + 2*out_left*1000
			z_b_left = ds - 2*wt*(out_left=0) + 2*out_left*1000
		else
			z_a_left = 0
			z_b_left = 0
		endif
		if is_z_right then
			z_a_right = ws - 2*wt*(out_right=0) + 2*out_right*1000
			z_b_right = ds - 2*wt*(out_right=0) + 2*out_right*1000
		else
			z_a_right = 0
			z_b_right = 0
		endif
		parameters z_a_left = z_a_left/1000, z_b_left = z_b_left/1000, z_a_right = z_a_right/1000, z_b_right = z_b_right/1000
	endif
endif

!"Швеллер"
!"Швеллер гнутый"
if name_prof = var_sort[3] or name_prof = var_sort[9] then
	p = (ws*4+ds*2)/1000
	s = p*dlin_prof
	if n_storon = 1 then pf = ds/1000
	if n_storon = 2 then pf = (ws+ds)/1000
	if n_storon = 3 then pf = (ws*3+ds*2)/1000
	if n_storon = 4 then pf = p
endif

!"Двутавр"
if name_prof = var_sort[4] then
	p = (ws*4+ds*2)/1000
	s = p*dlin_prof
	if n_storon = 1 then pf = ds/1000
	if n_storon = 2 then pf = (ws+ds)/1000
	if n_storon = 3 then pf = (ws*3+ds*2)/1000
	if n_storon = 4 then pf = p
endif

!"Уголок"
!"Уголок гнутый"
if name_prof = var_sort[5] or name_prof = var_sort[8] then
	p = (ws*2+ds*2)/1000
	s = p*dlin_prof
	if n_storon = 1 then pf = ds/1000
	if n_storon = 2 then pf = (ws+ds)/1000
	if n_storon = 3 then pf = (ws+ds*2)/1000
	if n_storon = 4 then pf = p
endif

!"Лист"
if name_prof = var_sort[6] then
	sum = A +  B + zzyzx
	a_m = min(A, B, zzyzx)
	c_m = max(A, B, zzyzx)
	b_m = sum - (a_m + c_m)
	s = c_m * b_m * 2 + a_m * (c_m + b_m)*2
	parameters perim = (A + B +ZZYZX) -  max(A,B,ZZYZX)
	p = perim
	parameters Ase = (perim - a_m) * a_m
	PARAMETERS dlin_prof = round_int((c_m * b_m)*200)/200
endif
parameters sprof = pf*dlin_prof + pf*dlin_prof*0.01, pprof = pf
if name_prof <> "Ручной" then
	parameters perim = p
	if uch_pokr then
		parameters spokr = s + s * 0.03
	else
		parameters spokr = 0
	endif
endif
!!-------------------------------------------------------------------------

control_sum = ""
var = tip_konstr : gosub "addvar"
var = stal_gost : gosub "addvar"
var = mater : gosub "addvar"
var = obozn : gosub "addvar"
var = tip_profile : gosub "addvar"
PARAMETERS control_sum = control_sum


!!-------------------- Тип спецификации -----------------------------------
dim type_spec_type_arr[]
success = LIBRARYGLOBAL ("Libraryflobals-km", "type_spec_type_arr", type_spec_type_arr)
values "type_spec" type_spec_type_arr
var = type_spec : arr_t = type_spec_type_arr : gosub "get_inx"
parameters type_spec_mat = inx
if type_spec="Металл" then
	hideparameter 'pm'
else
	hideparameter 'mater', 'tip_konstr','fire_prof'
endif
if type_spec="Не специфицировать" then
	PARAMETERS uch_pokr = 0, ves = 0
endif
!!-------------------------------------------------------------------------

!!----------------------- Огнезащита --------------------------------------
if name_prof <> "Лист" and name_prof <> "Ручной" then
	dim var_f[]
	success = LIBRARYGLOBAL ("Libraryflobals-km", "fire_type_arr", var_f)
	values "fire_prof" var_f
	if pf > 0 then parameters priv_t = str("%.1",Ase/(pf*10))
	if fire_prof = var_f[7] then 
		parameters t_pokr_txt = "Обеспечивается металлом", r_fire = 0, n_storon = 0,time_fire="-",perim_txt="-"
		HIDEPARAMETER "st_prof", "priv_t", "t_pokr_txt", "r_fire","n_storon","time_fire","Ase","perim","perim_txt"
	else
		dim var_time[][]
		var_time[1][1] = 120	:	var_time[1][2] = 90	:	var_time[1][3] = 45	:	var_time[1][4] = 15
		var_time[2][1] = 120	:	var_time[2][2] = 90	:	var_time[2][3] = 65	:	var_time[2][4] = 45
		var_time[3][1] = 30	:	var_time[3][2] = 15	:	var_time[3][3] = 15	:	var_time[3][4] = 15
		var_time[4][1] = 30	:	var_time[4][2] = 15	:	var_time[4][3] = 15	:	var_time[4][4] = 15
		var_time[5][1] = 60	:	var_time[5][2] = 45	:	var_time[5][3] = 45	:	var_time[5][4] = 15
		var_time[6][1] = 60	:	var_time[6][2] = 60	:	var_time[6][3] = 45	:	var_time[6][4] = 15
		var_time[7][1] = 0	:	var_time[7][2] = 0	:	var_time[7][3] = 0	:	var_time[7][4] = 0
		dim var_st[]
		i = 0
		i = i + 1 : var_st[i] = "I"
		i = i + 1 : var_st[i] = "II"
		i = i + 1 : var_st[i] = "III"
		i = i + 1 : var_st[i] = "IV"
		values "st_prof" var_st
	
		for i = 1 to vardim1(var_f)
			if var_f[i] = fire_prof then n_fire_prof = i
		next i
		
		for i = 1 to vardim1(var_st)
			if var_st[i] = st_prof then n_st_prof = i
		next i
	
		parameters time_fire = str("%.0",var_time[n_fire_prof][n_st_prof])
		if var_time[n_fire_prof][n_st_prof] > 15 and pf > 0 then
			parameters perim_txt = str("%.2",pf*100)
			name_fl = "def" + str("%.0",var_time[n_fire_prof][n_st_prof])+".txt"
			if Ase/(pf*10) >= 5.8 and not(konstr_zash) then
				ch1 = OPEN ("text", name_fl, "separator='\t', mode=ro, LIBRARY")
				i = 1 : temp = 0 : prtf = 0: prt=" " : flag = 0 : tolsh = " " : rash = " "
				11:
				t_tolsh = tolsh : t_rash = rash
				n = INPUT (ch1, i, 1, prt,tolsh,rash)
				if n <> -1 and vartype(prt)=2 then
					nn = SPLIT (prt, "%^n", temp)
					if Ase/(pf*10) < temp and flag = 0 then
						parameters t_pokr_txt = t_tolsh
						nn1 = SPLIT (t_rash, "%^n", rash)
						parameters r_fire = rash * sprof
						flag = 1
					endif
					i = i + 1
					goto 11
				else
					goto "close1"
				endif
		"close1":
				if flag = 0 then 
					n = INPUT (ch1, i-1, 1, prt,t_tolsh,t_rash)
					parameters t_pokr_txt = t_tolsh
					nn1 = SPLIT (t_rash, "%^n", rash)
					parameters r_fire = 0.9
				endif
				close ch1
			else 
				parameters r_fire = 0
				parameters t_pokr_txt = "Конструктивная огнезащита"
			endif
		else
			parameters perim_txt = "-"
			parameters n_storon = 0
			parameters r_fire = 0
			parameters t_pokr_txt = "Обеспечивается металлом"
		endif
	endif
else
	if name_prof = var_sort[6] then
		parameters fire_prof = "Не требует защиты"
		parameters perim_txt = "-"
		parameters n_storon = 0
		parameters r_fire = 0
		parameters t_pokr_txt = "Обеспечивается металлом"
	else
		if konstr_zash then
			parameters t_pokr_txt = "Конструктивная огнезащита"
		else
			parameters t_pokr_txt = "Обеспечивается металлом"
		endif
	endif
	HIDEPARAMETER "st_prof", "priv_t", "r_fire","n_storon","time_fire","Ase","perim","perim_txt"
endif
var = fire_prof : arr_t = var_f : gosub "get_inx"
parameters fire_mat = inx
dim fire_keep_type_arr[]
success = LIBRARYGLOBAL ("Libraryflobals-km", "fire_keep_type_arr", fire_keep_type_arr)
var = t_pokr_txt : arr_t = fire_keep_type_arr : gosub "get_inx"
if inx = 99 then inx = 3
parameters fire_keep_mat = inx
!!-------------------------------------------------------------------------

parameters ac_symb_display_option = 3
parameters ac_symb_show_projection_to = 1

if name_prof <> var_sort[6] and not(is_new) then
	aa = max(ws,ds)/1000
	bb = min(ws,ds)/1000
	if sin(ang)<0.0001 then
		parameters ac_toplevel = aa/2
		parameters ac_bottomlevel = -aa/2
	else
		parameters ac_toplevel = sin(ang)*(dlin_prof-dop_podrez_1)
		parameters ac_bottomlevel = sin(ang)*(dop_podrez_1)
	endif
endif

if vardim1(el_views)<=1 then
	dim el_tmp[]
	for i=1 to 20
		el_tmp[i] = " "
	next i
	parameters el_views = el_tmp
endif

end
"addvar":
	str_simv1 = "qwertyuiopasdfghjklzxcvbnm"
	str_simv2 = "йцукенгшщзхъфывапролджэячсмитьбю"
	str_simv3 = "1234567890"
	str_simv = str_simv1 + str_simv2 + str_simv3
	if vartype(var) = 1 then var = str("%.0",var)
	hash = 0
	for i = 1 to strlen(var)
		simv = STRSUB (var, i, 1)
		n = STRSTR (str_simv, simv)
		hash = hash + n
	next i
	control_sum = control_sum+str("%.0",hash)
return

"get_inx":
	inx = 99
	for i=1 to vardim1(arr_t)
		if var = arr_t[i] then inx = i
	next i
return
]]>
</Script_VL>

<ParamSection SectVersion="25" SectionFlags="0" SubIdent="0">
	<ParamSectHeader>
		<Version>25</Version>
		<AutoHotspots>false</AutoHotspots>
		<StatBits>
			<STBit_UIDefault/>
			<STBit_FixSize/>
		</StatBits>
		<WDLeftFrame>0</WDLeftFrame>
		<WDRightFrame>0</WDRightFrame>
		<WDTopFrame>0</WDTopFrame>
		<WDBotFrame>0</WDBotFrame>
		<LayFlags>31</LayFlags>
		<WDMirrorThickness>0</WDMirrorThickness>
		<WDWallInset>0</WDWallInset>
		<SymbolColor>0</SymbolColor>
	</ParamSectHeader>
	<Parameters>
		<String Name="Profile">
			<Description><![CDATA["Серийный размер"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
				<ParFlg_Unique/>
			</Flags>
			<Value><![CDATA["20К1"]]></Value>
		</String>
		<String Name="lastProfile">
			<Description><![CDATA["Предыдущий профиль"]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value><![CDATA["20К1"]]></Value>
		</String>
		<String Name="tip_p">
			<Description><![CDATA["Тип профиля"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value><![CDATA["К СТО "]]></Value>
		</String>
		<String Name="mater">
			<Description><![CDATA["Из стали -"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value><![CDATA["С245"]]></Value>
		</String>
		<String Name="subpos">
			<Description><![CDATA["Часть сборки"]]></Description>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="tip_konstr">
			<Description><![CDATA["Тип конструкции"]]></Description>
			<Value><![CDATA["Балки"]]></Value>
		</String>

		<!-- sp1_Z: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="sp1_Z">
			<Description><![CDATA["Заглушка"]]></Description>
		</Title>
		<Boolean Name="is_z_left">
			<Description><![CDATA["Заглушка слева"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_BoldName/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="out_left">
			<Description><![CDATA["Выступ (0 - заступ на тощину стенки) слева"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="z_th_left">
			<Description><![CDATA["Толщина слева"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0.003</Value>
		</Length>
		<Boolean Name="is_z_right">
			<Description><![CDATA["Заглушка справа"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_BoldName/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="out_right">
			<Description><![CDATA["Выступ (0 - заступ на тощину стенки) справа"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="z_th_right">
			<Description><![CDATA["Толщина справа"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0.003</Value>
		</Length>
		<String Name="z_mater">
			<Description><![CDATA["Сталь заглушки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["С235"]]></Value>
		</String>
		<String Name="z_stal_gost">
			<Description><![CDATA["Гост стали"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value><![CDATA["ГОСТ 27772-88"]]></Value>
		</String>
		<String Name="z_obozn">
			<Description><![CDATA["Обозначение"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value><![CDATA["ГОСТ 19903-74"]]></Value>
		</String>
		<Length Name="z_a_left">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="z_b_left">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="z_a_right">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>
		<Length Name="z_b_right">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Length>

		<!-- type_spec: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<String Name="type_spec">
			<Description><![CDATA["Специфицировать как"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value><![CDATA["Металл"]]></Value>
		</String>
		<Boolean Name="mun">
			<Description><![CDATA["Заполнять вручную"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="pm">
			<Description><![CDATA["Длина в погонных метрах"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<String Name="pref_naen">
			<Description><![CDATA["Префикс к наименованию"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[" "]]></Value>
		</String>
		<String Name="naen">
			<Description><![CDATA["Наименование"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[" 20К1 L=65000мм."]]></Value>
		</String>
		<String Name="obozn">
			<Description><![CDATA["Обозначение"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["СТО АСЧМ 20-93 "]]></Value>
		</String>
		<RealNum Name="ves">
			<Description><![CDATA["Масса ед., кг."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2718</Value>
		</RealNum>
		<RealNum Name="ves_p">
			<Description><![CDATA["Масса п.м., кг."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>41.4</Value>
		</RealNum>
		<RealNum Name="proc_zap">
			<Description><![CDATA["Процент запасса по массе"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0.01</Value>
		</RealNum>
		<Length Name="dlin_prof">
			<Description><![CDATA["Длина профиля с учётом подрезки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</Length>
		<Integer Name="type_spec_mat">
			<Description><![CDATA["Материал по типу спец-ии"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Integer>

		<!-- mat_pokr: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<String Name="mat_pokr">
			<Description><![CDATA["Тип обработки"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value><![CDATA["тип 1"]]></Value>
		</String>
		<Material Name="col_mat">
			<Description><![CDATA["Покрытие декоративное"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>76</Value>
		</Material>
		<RealNum Name="spokr">
			<Description><![CDATA["Площадь окраски + 3%"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>79.5366</Value>
		</RealNum>
		<Boolean Name="uch_pokr">
			<Description><![CDATA["Окрашено"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</Boolean>
		<Integer Name="cov_mat">
			<Description><![CDATA["Покрытие по антикорозийке"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>

		<!-- fire_prof: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<String Name="fire_prof">
			<Description><![CDATA["Группа конструкций"]]></Description>
			<Flags>
				<ParFlg_BoldName/>
			</Flags>
			<Value><![CDATA["Межэтажные перекрытия"]]></Value>
		</String>
		<Boolean Name="konstr_zash">
			<Description><![CDATA["Конструктивная огнезащита"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Integer Name="n_storon">
			<Description><![CDATA["Количество обогреваемых сторон"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<String Name="st_prof">
			<Description><![CDATA["Степень огнестойкости"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["II"]]></Value>
		</String>
		<String Name="time_fire">
			<Description><![CDATA["Требуемое время защиты от огня"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["45"]]></Value>
		</String>
		<String Name="priv_t">
			<Description><![CDATA["Приведённая толщина металла, мм."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["26,9"]]></Value>
		</String>
		<String Name="t_pokr_txt">
			<Description><![CDATA["Требуемая толщина огнезащиты, мм."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["0,21"]]></Value>
		</String>
		<RealNum Name="r_fire">
			<Description><![CDATA["Расход огнезащиты, кг"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>4.889612</Value>
		</RealNum>
		<RealNum Name="Ase">
			<Description><![CDATA["Площадь сечения, кв.см."]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>52.69</Value>
		</RealNum>
		<String Name="perim_txt">
			<Description><![CDATA["Обогреваемый периметр, cм"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["19,60"]]></Value>
		</String>
		<Length Name="perim">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1.188</Value>
		</Length>
		<RealNum Name="sprof">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>12.8674</Value>
		</RealNum>
		<RealNum Name="pprof">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0.196</Value>
		</RealNum>
		<Integer Name="fire_mat">
			<Description><![CDATA["Покрытие по огнестойкости"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>5</Value>
		</Integer>
		<Integer Name="fire_keep_mat">
			<Description><![CDATA["Покрытие по огнезащите"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>3</Value>
		</Integer>
		<Length Name="A">
			<Description><![CDATA["Длина уголка"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>65</Value>
		</Length>
		<Length Name="B">
			<Description><![CDATA["Диаметр поперечин"]]></Description>
			<Fix/>
			<Value>0.199</Value>
		</Length>
		<Length Name="zzyzx">
			<Description><![CDATA["Диаметр поперечин"]]></Description>
			<Fix/>
			<Value>0.196</Value>
		</Length>
		<Boolean Name="AC_show2DHotspotsIn3D">
			<Description><![CDATA["Показыв. 2D-узл.т. в 3D"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Length Name="ac_bottomlevel">
			<Description><![CDATA["Уровень внизу"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>-0.0995</Value>
		</Length>
		<Length Name="ac_toplevel">
			<Description><![CDATA["Уровень вверху"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.0995</Value>
		</Length>
		<RealNum Name="ac_symb_display_option">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>3</Value>
		</RealNum>
		<RealNum Name="ac_symb_show_projection_to">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Hidden/>
			</Flags>
			<Value>1</Value>
		</RealNum>

		<!-- _sp0: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="_sp0">
			<Description><![CDATA["Размеры"]]></Description>
		</Title>
		<RealNum Name="ws">
			<Description><![CDATA["Ширина профиля (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>199</Value>
		</RealNum>
		<RealNum Name="ds">
			<Description><![CDATA["Высота профиля (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>196</Value>
		</RealNum>
		<RealNum Name="wt">
			<Description><![CDATA["Толщина стенки (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>6.5</Value>
		</RealNum>
		<RealNum Name="ft">
			<Description><![CDATA["Толщина фланца (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>10</Value>
		</RealNum>
		<RealNum Name="rr">
			<Description><![CDATA["Радиус основания (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>13</Value>
		</RealNum>
		<RealNum Name="tr">
			<Description><![CDATA["Глубина между скругл. (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>5</Value>
		</RealNum>
		<RealNum Name="dbf">
			<Description><![CDATA["Глубина между скругл. (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>150</Value>
		</RealNum>
		<RealNum Name="ax_y">
			<Description><![CDATA["Привязка оси y (мм)"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>3846</Value>
		</RealNum>

		<!-- gs_2D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_2D_representation">
			<Description><![CDATA["2D-представление"]]></Description>
			<Fix/>
		</Title>
		<Boolean Name="upr">
			<Description><![CDATA["Элемент узла"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<String Name="el_views">
			<Description><![CDATA["Скрывать на виде"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<ArrayValues FirstDimension="20" SecondDimension="0">
				<AVal Row="1"><![CDATA[" "]]></AVal>
				<AVal Row="2"><![CDATA[" "]]></AVal>
				<AVal Row="3"><![CDATA[" "]]></AVal>
				<AVal Row="4"><![CDATA[" "]]></AVal>
				<AVal Row="5"><![CDATA[" "]]></AVal>
				<AVal Row="6"><![CDATA[" "]]></AVal>
				<AVal Row="7"><![CDATA[" "]]></AVal>
				<AVal Row="8"><![CDATA[" "]]></AVal>
				<AVal Row="9"><![CDATA[" "]]></AVal>
				<AVal Row="10"><![CDATA[" "]]></AVal>
				<AVal Row="11"><![CDATA[" "]]></AVal>
				<AVal Row="12"><![CDATA[" "]]></AVal>
				<AVal Row="13"><![CDATA[" "]]></AVal>
				<AVal Row="14"><![CDATA[" "]]></AVal>
				<AVal Row="15"><![CDATA[" "]]></AVal>
				<AVal Row="16"><![CDATA[" "]]></AVal>
				<AVal Row="17"><![CDATA[" "]]></AVal>
				<AVal Row="18"><![CDATA[" "]]></AVal>
				<AVal Row="19"><![CDATA[" "]]></AVal>
				<AVal Row="20"><![CDATA[" "]]></AVal>
			</ArrayValues>
		</String>
		<Integer Name="upr_mat">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<String Name="upr_rezhim">
			<Description><![CDATA["Режим упрощ"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value><![CDATA["Без отделки"]]></Value>
		</String>
		<Integer Name="upr_n">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<Length Name="tolsh">
			<Description><![CDATA["??"]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0.01</Value>
		</Length>
		<PenColor Name="gs_cont_pen">
			<Description><![CDATA[""]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</PenColor>
		<FillPattern Name="gs_fill_type">
			<Description><![CDATA["а в упрощённом виде"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>65</Value>
		</FillPattern>
		<PenColor Name="gs_fill_pen">
			<Description><![CDATA["Перо контура"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<PenColor Name="gs_back_pen">
			<Description><![CDATA["Образец штриховки"]]></Description>
			<Fix/>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>19</Value>
		</PenColor>
		<Integer Name="type_sech">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<String Name="gs_detlevel_3D">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Детальный"]]></Value>
		</String>
		<Integer Name="gs_resol">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>10</Value>
		</Integer>
		<PenColor Name="only_axis_pen">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>220</Value>
		</PenColor>
		<LineType Name="only_axis_line">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</LineType>
		<Integer Name="det_lvl">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>
		<Integer Name="type_axis">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Integer>

		<!-- gs_3D_representation: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="gs_3D_representation">
			<Description><![CDATA["Перо штриховки"]]></Description>
		</Title>
		<Material Name="gs_ifc_mat">
			<Description><![CDATA["Перо фона штриховки"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>325</Value>
		</Material>
		<String Name="gs_cutmode_bot">
			<Description><![CDATA["3D-представление"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<String Name="gs_cutmode_up">
			<Description><![CDATA["Покрытие IFC"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>
		<Integer Name="stal_mat">
			<Description><![CDATA["Покрытие по стали"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<Integer Name="type_mat">
			<Description><![CDATA["Покрытие по типу"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Integer>
		<Angle Name="gs_cutang1_bot">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="gs_cutang2_bot">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="gs_cutang3_up">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="gs_cutang4_up">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="temp_cutang1_bot">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>60</Value>
		</Angle>
		<Angle Name="temp_cutang2_bot">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>60</Value>
		</Angle>
		<Angle Name="temp_cutang3_up">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>60</Value>
		</Angle>
		<Angle Name="temp_cutang4_up">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>60</Value>
		</Angle>
		<Angle Name="ang">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="ang_pl">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>0</Value>
		</Angle>
		<Angle Name="temp_ang">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>90</Value>
		</Angle>
		<String Name="gs_rot_axis">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA[""]]></Value>
		</String>

		<!-- inf: PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK ===== PARAMETER BLOCK -->

		<Title Name="inf">
			<Description><![CDATA[""]]></Description>
		</Title>
		<String Name="name_prof">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["Двутавр"]]></Value>
		</String>
		<String Name="f_name">
			<Description><![CDATA["Информация"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["дв_Двутавр_СТО_К.txt"]]></Value>
		</String>
		<Integer Name="sor">
			<Description><![CDATA["Вид профиля"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>17</Value>
		</Integer>
		<Integer Name="n_stroki">
			<Description><![CDATA["Имя файла сортамента"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>2</Value>
		</Integer>
		<String Name="control_sum">
			<Description><![CDATA["Контрольная сумма"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["172447185256187"]]></Value>
		</String>
		<String Name="stal_marka">
			<Description><![CDATA["Марка стали"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["С245"]]></Value>
		</String>
		<String Name="stal_gost">
			<Description><![CDATA["Гост на сталь"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["ГОСТ 27772-88"]]></Value>
		</String>
		<String Name="tip_profile">
			<Description><![CDATA["Имя профиля"]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value><![CDATA["20К1"]]></Value>
		</String>
		<String Name="param_name_out">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<ArrayValues FirstDimension="5" SecondDimension="0">
				<AVal Row="1"><![CDATA["!!Профиль Двутавр!!"]]></AVal>
				<AVal Row="2"><![CDATA["naen - наименование"]]></AVal>
				<AVal Row="3"><![CDATA["obozn - обозначение"]]></AVal>
				<AVal Row="4"><![CDATA["tip_profile - сечение"]]></AVal>
				<AVal Row="5"><![CDATA["mater - марка стали"]]></AVal>
			</ArrayValues>
		</String>
		<String Name="param_temp_out">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<ArrayValues FirstDimension="3" SecondDimension="0">
				<AVal Row="1"><![CDATA["%subpos%"]]></AVal>
				<AVal Row="2"><![CDATA["%naen%"]]></AVal>
				<AVal Row="3"><![CDATA["%tip_profile% по %obozn% %mater%"]]></AVal>
			</ArrayValues>
		</String>
		<Boolean Name="show_el">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
				<ParFlg_Hidden/>
			</Flags>
			<Value>0</Value>
		</Boolean>
		<Boolean Name="ParamcontrolByGrasshopper">
			<Description><![CDATA[""]]></Description>
			<Flags>
				<ParFlg_Child/>
			</Flags>
			<Value>1</Value>
		</Boolean>
	</Parameters>
</ParamSection>

<Picture MIME="image/png" SectVersion="19" SectionFlags="0" SubIdent="0" length_in_bytes="1695" platform="Win">
	<![CDATA[
	696D6167652F706E670089504E470D0A1A0A0000000D49484452000000800000
	00800803000000F4E091F90000000467414D4100009C40200DE4CB0000030050
	4C5445FFFFFF89888AC4C3C4E1E1E1A6A5A70000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000000000000000000000000000000000000000000000000000000000000
	0000000AF0A5F6000000097048597300000AC400000A9C01140F55880000001F
	74455874536F66747761726500517569636B54696D6520372E33202857696E33
	32290013CF7DD60000000774494D4507D8030E0E3B01D4EDCBA5000002ED4944
	4154789CED5BD9B2AC30081C43FEFF9BCFB53C13B3401602EDB955F6DB4C2934
	0DB8C4F0F9BCF83F412184E346FCF713E83B1E02002C64E78904B939EF848E10
	8226BDFF72B0761FC63E2B44CB54ACBB37A5C0B93FFB2EB31FCAAE34A5408D59
	B1C6982A8DDBFE6B93A32E6B38EC8950853F57DB55BFEC8850588AF3AD456541
	684528C25FADA782824E04DA705F53D030C8E5576AB86522EED1BF407A067183
	BB859D6810FE055231B8FDEFDFD5B2ABC23403C529A6E68CFD2F1B34F7BF6832
	55CDFE8D4C65F4AE5A43FFD96571C8C05EFF0B290B83BE8A4EFE672D939BFF9B
	41370976D71F9DF129926A8CE54D47B8F8BF5B418CCFB1002E7C1516923024B8
	8D81C4CE0938117A1204EF049C889D20DD13708264092002F4248008D0918030
	0224099A40A5FFCD2144DA290E6BF0B9FE96A0BF7FC1558409902420EE4F84FF
	AF0481F90F4AA07086CC009B03D445E0421B2E21339072109B7F602BEE4DBCD8
	1260328ECD00A3F8D304087523921CA26BB091FC2580BD0E9EA8FA1EDD048DE6
	2F8197C04BE025F03801F4035173F17FFC66F41278FC99F0CF10803D91346DF7
	F89B51FBB2E60AE655145B048CE00734078C37680EB8C500E802011B2DB211D9
	7B1F3007BCDAA0B5F213C27A39AE0F044FB09542D1114A02D14FEF6B8E21E462
	032DD81F72BB4124E8751B75C859A1EF2376D819A1EFC2FBDBF5F8E3B0EFD7FB
	99EFF7C303F630F878FEF1DDC13127B06712E6A23BDC1824FFFD2B9DCB3EAA25
	C3D187C1BD416B585E3E5B9956AC26AE76B7259ADDC8751D9D18586561D5A235
	83757BB60C34D6745B6179E836E8660CF64A9174FE0B063B6312D9FEF2D56CE6
	BBB2B522E48306EBD5549CAD1221ECC6906F8E5FA7500C1828B3580E292C19D9
	383547352D32ABA3F23416D5F4D0C414593DEBB33B6BD48C9875675DAAE996DD
	F02F302354819B360ACC309ED1B497306A768E7BFD4238C0EE914233ED663A6E
	37336A59C261F07265E2D1EB1DBF2D724E7ADF1586C1E02966FA97B88E3B90A3
	C717EE2E741CF57DE18F1F5D060E09A822C0630000000049454E44AE426082
	]]>
</Picture>

<Ancestry SectVersion="1" SectionFlags="0" SubIdent="0" Template="true">
	<MainGUID>F938E33A-329D-4A36-BE3E-85E126820996</MainGUID>
	<MainGUID>103E8D2C-8230-42E1-9597-46F84CCE28C0</MainGUID>
	<MainGUID>AD0A9673-1F68-45E0-89E1-9D72C32BC402</MainGUID>
	<MainGUID>F7503C06-F666-4A46-8728-F446C6674F7A</MainGUID>
</Ancestry>

<CalledMacros SectVersion="2" SectionFlags="0" SubIdent="0">
	<Macro>
		<MName><![CDATA["Libraryflobals-km"]]></MName>
		<MainGUID>2087989F-7AAB-43CC-9F4A-8CC8975EA122</MainGUID>
	</Macro>
	<Macro>
		<MName><![CDATA["Спецификатор"]]></MName>
		<MainGUID>88E821BC-A95F-4CEA-9F73-6500A781AE09</MainGUID>
	</Macro>
</CalledMacros>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_PR SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
if type_spec = "Металл" then
	tip_el = "20"
	call "Спецификатор" parameters tip_el=tip_el,
									subpos = subpos, 
									pos = GLOB_ID,
									tip_konstr=tip_konstr,
									stal_gost=stal_gost,
									mater=mater,
									obozn=obozn,
									tip_profile=tip_profile,
									dlin_prof=dlin_prof,
									ves=(ves/dlin_prof), 
									naen=naen
	if is_z_left then
		z_at = min(z_a_left,z_b_left)
		z_bt = max(z_a_left,z_b_left)
		z_th = z_th_left
		z_ves_p = 7850 * z_th
		z_s_plit_obsh = z_at * z_bt
		z_naen = "--" + str("%.0mm", z_th) + "x" + str("%.0mm", z_at) + "x" + str("%.0mm", z_bt)
		z_naen_l = z_naen
		z_tip_profile = "-- " + str('%.0mm', z_th)
		gosub "zagl"
		call "Спецификатор" parameters tip_el=tip_el,
										subpos = subpos, 
										pos = GLOB_ID+".1",
										tip_konstr=tip_konstr,
										stal_gost=z_stal_gost,
										mater=z_mater,
										obozn=z_obozn,
										tip_profile=z_tip_profile,
										dlin_prof=z_s_plit_obsh,
										ves=z_ves_p, 
										naen=z_naen		
	endif
	if is_z_right then
		z_at = min(z_a_right,z_b_right)
		z_bt = max(z_a_right,z_b_right)
		z_th = z_th_right
		z_ves_p = 7850 * z_th
		z_s_plit_obsh = z_at * z_bt
		z_naen = "--" + str("%.0mm", z_th) + "x" + str("%.0mm", z_at) + "x" + str("%.0mm", z_bt)
		if is_z_left then
			if z_naen_l=z_naen then
				subid=".1"
			else
				subid=".2"
			endif
		else
			subid=".1"
		endif
		z_tip_profile = "-- " + str('%.0mm', z_th)
		gosub "zagl"
		call "Спецификатор" parameters tip_el=tip_el,
										subpos = subpos, 
										pos = GLOB_ID+subid,
										tip_konstr=tip_konstr,
										stal_gost=z_stal_gost,
										mater=z_mater,
										obozn=z_obozn,
										tip_profile=z_tip_profile,
										dlin_prof=z_s_plit_obsh,
										ves=z_ves_p, 
										naen=z_naen		
	endif
endif

if type_spec = "Изделие" then
	tip_el = "40"
	if pm then
	call "Спецификатор" parameters tip_el=tip_el,
									subpos = subpos, 
									pos = GLOB_ID, 
									obozn=obozn,
									naen=tip_profile + " L =",
									ves=(ves/dlin_prof),
									kol_vo_spec=dlin_prof,
									komment="п.м."
	else
	call "Спецификатор" parameters tip_el=tip_el,
									subpos = subpos, 
									pos = GLOB_ID, 
									obozn=obozn,
									naen=naen,
									ves=ves,
									kol_vo_spec=1,
									komment="кг."
	endif
	if is_z_left then
		z_at = min(z_a_left,z_b_left)
		z_bt = max(z_a_left,z_b_left)
		z_th = z_th_left
		z_ves_p = 7850 * z_th
		z_s_plit_obsh = z_at * z_bt
		z_naen = "--" + str("%.0mm", z_th) + "x" + str("%.0mm", z_at) + "x" + str("%.0mm", z_bt)
		z_tip_profile = "-- " + str('%.0mm', z_th)
		gosub "zagl"
		call "Спецификатор" parameters tip_el=tip_el,
										subpos = subpos, 
										pos = GLOB_ID+".1", 
										obozn=z_obozn,
										naen=z_naen,
										ves=z_ves_p*z_s_plit_obsh,
										kol_vo_spec=1,
										komment="кг."	
	endif
	if is_z_right then
		z_at = min(z_a_right,z_b_right)
		z_bt = max(z_a_right,z_b_right)
		z_th = z_th_right
		z_ves_p = 7850 * z_th
		z_s_plit_obsh = z_at * z_bt
		z_naen = "--" + str("%.0mm", z_th) + "x" + str("%.0mm", z_at) + "x" + str("%.0mm", z_bt)
		z_tip_profile = "-- " + str('%.0mm', z_th)
		gosub "zagl"
		call "Спецификатор" parameters tip_el=tip_el,
										subpos = subpos, 
										pos = GLOB_ID+".1", 
										obozn=z_obozn,
										naen=z_naen,
										ves=z_ves_p*z_s_plit_obsh,
										kol_vo_spec=1,
										komment="кг."	
	endif
endif

if uch_pokr then
	tip_el = "30"
	komment = "кв.м."

	obozn = "см. примечания"
	naen = "Покрытие " + mat_pokr
	z_s_plit_obsh = (z_a_left * z_b_left)*is_z_left + (z_a_right*z_b_right)*is_z_right
	kol_vo_spec = spokr + z_s_plit_obsh
	call "Спецификатор" parameters tip_el=tip_el,
									subpos = subpos,  
									obozn=obozn,
									naen=naen,
									kol_vo_spec=kol_vo_spec,
									komment=komment
endif

if r_fire > 0 then
	tip_el = "30"
	komment = "кг."

	obozn = " "
	naen = "Тонкослойное огнезащитное покрытие"
	kol_vo_spec = r_fire

	call "Спецификатор" parameters tip_el=tip_el,
									subpos = subpos,  
									obozn=obozn,
									naen=naen,
									kol_vo_spec=kol_vo_spec,
									komment=komment
else
	if t_pokr_txt <> "Обеспечивается металлом" then
		tip_el = "30"
		komment = "кв.м."
	
		obozn = " "
		naen = "Конструктивная огнезащита"
		kol_vo_spec = sprof
	
		call "Спецификатор" parameters tip_el=tip_el,
										subpos = subpos,  
										obozn=obozn,
										naen=naen,
										kol_vo_spec=kol_vo_spec,
										komment=komment
	endif
endif

end

"zagl":
	z_a = min(z_at, z_bt)
	z_b = max(z_at, z_bt)
	z_ves_p = 7850 * z_th
	z_vt = 7850 * z_a * z_th * z_b + 7850 * z_a * z_th * z_b * proc_zap
	if round_int(z_vt*5)/5 < z_vt then z_vt = z_vt + 0.1
	z_ves = round_int(z_vt*5)/5
	z_naen = "--" + str("%.0mm", z_th) + "x" + str("%.0mm", z_a) + "x" + str("%.0mm", z_b)
	z_tip_profile = "-- " + str('%.0mm', z_th)
	z_dlin_prof = round_int((z_a * z_b)*200)/200
return
]]>
</Script_PR>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_UI SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_UI>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Comment SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Comment>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_FWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Script_FWM>

<!-- GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT ===== GDL SCRIPT -->

<Script_BWM SectVersion="20" SectionFlags="0" SubIdent="0">
<![CDATA[
!dim vekt[]
!
!!Открываем файл f_name, подгруженный в библиотеку, и читаем из него список наименований
!
!v1 = ""
!szelv = open("text", f_name, "separator='\t', mode=ro, LIBRARY")
!for i = 2 to sor - 1
!	mm = input(szelv, i, 2, v1)
!	vekt[i-1] = v1
!next i
!close szelv
!
!!Собственно выбор наименования
!values "Profile" vekt
!
!!Определяем номер строки в массиве с этим наименованием
!for i = 1 to VARDIM1(vekt)
!	if Profile = vekt[i] then
!		n_stroki = i + 1
!	endif
!next i
!
!PARAMETERS n_stroki = n_stroki
!
!szelv=open("text", f_name, "separator='\t', mode=ro, LIBRARY")
!	!Считываем параметры
!	n=input(szelv, n_stroki, 3, ves_p, ds, ws, wt, ft, rr, tr, as, dbf)
!close szelv
!
!parameters ds = ds, ws = ws, wt = wt, ft = ft, rr = rr, tr = tr, dbf = dbf, ves_p = ves_p

]]>
</Script_BWM>

<Copyright SectVersion="1" SectionFlags="0" SubIdent="0">
	<Author></Author>
	<License>
		<Type>CC0</Type>
		<Version>1.0</Version>
	</License>
</Copyright>

<Keywords SectVersion="1" SectionFlags="0" SubIdent="0">
<![CDATA[]]>
</Keywords>

</Symbol>
